<alfresco-config>

	<!-- Global config section -->
	<config replace="true">
		<flags>
			<!-- Developer debugging setting to turn on DEBUG mode for client scripts 
				in the browser -->
			<client-debug>true</client-debug>

			<!-- LOGGING can always be toggled at runtime when in DEBUG mode (Ctrl, 
				Ctrl, Shift, Shift). This flag automatically activates logging on page load. -->
			<client-debug-autologging>false</client-debug-autologging>
		</flags>
	</config>

	<config evaluator="string-compare" condition="WebFramework">
		<web-framework>
			<!-- SpringSurf Autowire Runtime Settings -->
			<!-- Developers can set mode to 'development' to disable; SpringSurf caches, 
				FreeMarker template caching and Rhino JavaScript compilation. -->
			<autowire>
				<!-- Pick the mode: "production" or "development" -->
				<mode>production</mode>
			</autowire>

			<!-- Allows extension modules with <auto-deploy> set to true to be automatically 
				deployed -->
			<module-deployment>
				<mode>manual</mode>
				<enable-auto-deploy-modules>true</enable-auto-deploy-modules>
			</module-deployment>
		</web-framework>
	</config>

	<!-- Document Library config section -->
	<config evaluator="string-compare" condition="DocumentLibrary">
		<!-- Used by the "Manage Aspects" action For custom aspects, remember to 
			also add the relevant i18n string(s) cm_myaspect=My Aspect -->
		<aspects>
			<!-- Aspects that a user can see -->
			<visible>
<!-- 				<aspect name="cm:dublincore" /> -->
				<aspect name="cm:versionable" />
				<aspect name="cm:taggable" />
				<aspect name="exif:exif" />

				<aspect name="ucm:site_aspect" />
				<aspect name="ucm:indoor_artifact_aspect" />
				<aspect name="ucm:outdoor_artifact_aspect" />
				<aspect name="ucm:archeological_aspect" />
				<aspect name="ucm:museum_artifact_aspect" />
				<aspect name="ucm:artist_aspect" />
				<aspect name="ucm:project_aspect" />
			</visible>

			<!-- Aspects that a user can add. Same as "visible" if left empty -->
			<addable>
			</addable>

			<!-- Aspects that a user can remove. Same as "visible" if left empty -->
			<removeable>
			</removeable>
		</aspects>

		<!-- Used by the "Change Type" action Define valid subtypes using the following 
			example: <type name="cm:content"> <subtype name="cm:mysubtype" /> </type> 
			Remember to also add the relevant i18n string(s): cm_mysubtype=My SubType -->
		<types>
			<type name="cm:content">
				<subtype name="ucm:artifact" />
			</type>

			<type name="cm:folder">
				<subtype name="ucm:collection" />
			</type>

			<type name="ucm:artifact"></type>
<!-- 
			<type name="ucm:collection"></type>
			
			<type name="cm:folder"></type>
-->
			<type name="trx:transferTarget">
				<subtype name="trx:fileTransferTarget" />
			</type>
		</types>

		<create-content>
	         <content id="plain-text" label="create-content.text" type="pagelink" index="10" icon="text">
	            <param name="page">create-content?destination={nodeRef}&amp;itemId=cm:content&amp;mimeType=text/plain</param>
	         </content>

			<content id="artifact" mimetype="image/jpeg" label="menu.create-content.ucm_artifact" itemid="ucm:artifact" />
	         <content id="collection" label="menu.create-content.ucm_collection" icon="folder" index="2" type="javascript">
	            <param name="function">onNewFolder</param>
	         </content>
<!-- 	         
	         <content id="artist" label="menu.create-content.ucm_artist" icon="folder" index="3" type="javascript">
	            <param name="function">onNewFolder</param>
	         </content>
-->	         
		</create-content>
	
        <create-content-by-template>false</create-content-by-template>

		<metadata-templates>
			<template id="isArtifact">
				<evaluator>evaluator.doclib.metadata.isArtifact</evaluator>
				<line index="10" id="date" view="detailed">{date}{size}</line>
				<line index="20" id="social" view="detailed">{social}</line>
			</template>
		</metadata-templates>
	</config>


	<!-- ucm:collection type (creating nodes) -->
	<config evaluator="model-type" condition="ucm:collection">
		<forms>
			<field-visibility>
				<show id="ucm:collection_name"/>
				<show id="ucm:collection_id"/>
			</field-visibility>
            <appearance>                    
                <field id="ucm:collection_name" label-id="Collection Name" />
                <field id="ucm:collection_id" label-id="Collection ID" />
            </appearance>
		</forms>
		
		<types>
			<type name="cm:content">
				<subtype name="ucm:artifact" />
			</type>

			<type name="cm:folder">
				<subtype name="ucm:collection" />
			</type>

			<type name="ucm:collection">
				<subtype name="ucm:artist" />
			</type>

			<type name="ucm:artifact"></type>
<!-- 
			<type name="ucm:collection"></type>
			
			<type name="cm:folder"></type>
-->
			<type name="trx:transferTarget">
				<subtype name="trx:fileTransferTarget" />
			</type>
		</types>

		<create-content>
	         <content id="plain-text" label="create-content.text" type="pagelink" index="10" icon="text">
	            <param name="page">create-content?destination={nodeRef}&amp;itemId=cm:content&amp;mimeType=text/plain</param>
	         </content>
			<content id="artifact" mimetype="image/jpeg" label="menu.create-content.ucm_artifact" itemid="ucm:artifact" />
	         <content id="collection" label="menu.create-content.ucm_collection" icon="folder" index="2" type="javascript">
	            <param name="function">onNewFolder</param>
	         </content>
	         <content id="artist" label="menu.create-content.ucm_artist" icon="folder" index="3" type="javascript">
	            <param name="function">onNewFolder</param>
	         </content>
		</create-content>
		
		
		
	</config>

	<!-- ucm:collection type (existing nodes) -->
	<config evaluator="node-type" condition="ucm:collection">
		<forms>
		   <form>
				<field-visibility>
					<show id="ucm:collection_name"/>
					<show id="ucm:collection_id"/>
				</field-visibility>
	            <appearance>                    
	                <field id="ucm:collection_name" label-id="Collection Name" />
	                <field id="ucm:collection_id" label-id="Collection ID" />
	            </appearance>
            </form>
            <form id="doclib-simple-metadata">
				<field-visibility>
					<show id="ucm:collection_name"/>
					<show id="ucm:collection_id"/>
				</field-visibility>
	            <appearance>                    
	                <field id="ucm:collection_name" label-id="Collection Name" />
	                <field id="ucm:collection_id" label-id="Collection ID" />
	            </appearance>
			</form>

			<!-- Document Library Inline Edit form -->
			<form id="doclib-inline-edit">
				<field-visibility>
					<show id="ucm:collection_name"/>
					<show id="ucm:collection_id"/>
				</field-visibility>
	            <appearance>                    
	                <field id="ucm:collection_name" label-id="Collection Name" />
	                <field id="ucm:collection_id" label-id="Collection ID" />
	            </appearance>
			</form>
		</forms>
	</config>

	<!-- ucm:artifact type (creating nodes) -->
	<config evaluator="model-type" condition="ucm:artifact">
		<forms>
			<!-- Default form configuration for the ucm:artifact type -->
			<form>
				<create-form template="/com/alfresco/museum/ucm/form/ucm-artifact-props-form.ftl"/>
				<field-visibility>
					<show id="cm:name" />
					<show id="cm:title" />
					<show id="cm:content" force="true"/>
					
					<show id="ucm:artifact_name"/>
					<show id="ucm:artist_name" />
					<show id="ucm:museum_number" />
					<show id="ucm:artifact_date" />
					<show id="ucm:artifact_medium" />
					<show id="ucm:artifact_technique" />
					<show id="ucm:artifact_dimension" />
					<show id="ucm:artifact_status" />
					<show id="ucm:artifact_location" />
					<show id="ucm:artifact_collection" />
					<show id="ucm:artifact_acquisition_type" />
					<show id="ucm:artifact_donor" />
					<show id="ucm:artifact_type" />
					<show id="ucm:artifact_on_display" />
					<show id="ucm:artifact_comments" />
					<!--show id="ucm:artifact_referenced_objects" /-->
					<show id="ucm:artist_nickname" />
					<show id="ucm:artist_dob" />
					<show id="ucm:artist_birth_place" />
					<show id="ucm:artist_dod" />
					<show id="ucm:artist_death_place" />
					<show id="ucm:artist_study_workshop" />
					<show id="ucm:artist_live_city" />
					<show id="ucm:artist_period" />
					<show id="ucm:artist_comments" />
					<show id="ucm:museum_artifact_gallery_location" />
					
					<!-- <show id="ucm:artifact_referenced_objects" /> -->

					<!-- cm:dublincore aspect -->
					<!--<show id="cm:publisher" />
					<show id="cm:contributor" />
					<show id="cm:type" />
					<show id="cm:identifier" />
					<show id="cm:dcsource" />
					<show id="cm:coverage" />
					<show id="cm:rights" />
					<show id="cm:subject" /> -->
				</field-visibility>
				<appearance>
					<set id="artifactMain" appearance="fieldset" label="Main artifact properties" />
					<set id="artifactRest" appearance="accordion-wrapper" label="Additional properties" />
						<set id="artifactAdditional" parent="artifactRest" appearance="accordion-element" label="Artifact" />
						<set id="artifactArtist" parent="artifactRest" appearance="accordion-element" label="Artist" />
						<set id="artifactMuseum" parent="artifactRest" appearance="accordion-element" label="Museum" />
					<!-- TODO: rest of aspects. And properties? -->
					<field id="cm:name">
						<control>
							<control-param name="maxLength">255</control-param>
						</control>
					</field>
 					<field id="cm:title" />
 					<field id="cm:content">
		               <control template="/com/alfresco/museum/ucm/form/controls/ucm-file-upload.ftl" />
		            </field>
					<field id="ucm:artifact_name" set="artifactMain" />
					<field id="ucm:artist_name" set="artifactMain" />
					<field id="ucm:museum_number" set="artifactMain" />
					
					<field id="ucm:artifact_date" set="artifactMain" />
					<field id="ucm:artifact_medium" set="artifactMain" />
					<field id="ucm:artifact_technique" set="artifactMain" />
					<field id="ucm:artifact_dimension" set="artifactMain" />
					<field id="ucm:artifact_status" set="artifactMain" />
					
					<field id="ucm:artifact_location" set="artifactAdditional" />
					<field id="ucm:artifact_collection" set="artifactAdditional" />
					<field id="ucm:artifact_acquisition_type" set="artifactAdditional" />
					<field id="ucm:artifact_donor" set="artifactAdditional" />
					<field id="ucm:artifact_type" set="artifactAdditional" />
					<field id="ucm:artifact_on_display" set="artifactAdditional" />
					<field id="ucm:artifact_comments" set="artifactAdditional" />
					<!--field id="ucm:artifact_referenced_objects" set="artifactAdditional" /-->
					
					<field id="ucm:artist_nickname" set="artifactArtist" />
					<field id="ucm:artist_dob" set="artifactArtist" />
					<field id="ucm:artist_birth_place" set="artifactArtist" />
					<field id="ucm:artist_dod" set="artifactArtist" />
					<field id="ucm:artist_death_place" set="artifactArtist" />
					<field id="ucm:artist_study_workshop" set="artifactArtist" />
					<field id="ucm:artist_live_city" set="artifactArtist" />
					<field id="ucm:artist_period" set="artifactArtist" />
					<field id="ucm:artist_comments" set="artifactArtist" />
					
					<field id="ucm:museum_artifact_gallery_location" set="artifactMuseum" />
				</appearance>
			</form>

			<!-- TODO -->
			<!-- Document Library pop-up Edit Metadata form -->
			<form id="doclib-simple-metadata">
				<field-visibility>
					<show id="cm:name" />
					<show id="ucm:artifact_name" />
					<show id="ucm:artist_name" />
					<show id="ucm:museum_number" />
				</field-visibility>
				<edit-form template="../documentlibrary/forms/doclib-simple-metadata.ftl" />
				<appearance>
					<field id="cm:name" />
					<field id="ucm:artifact_name" />
					<field id="ucm:artist_name" />
					<field id="ucm:museum_number" />
				</appearance>
			</form>

			<!-- TODO -->
			<!-- Document Library Inline Edit form -->
			<form id="doclib-inline-edit">
				<field-visibility>
					<show id="cm:name" />
					<show id="ucm:artifact_name" />
					<show id="ucm:artist_name" />
					<show id="ucm:museum_number" />
				</field-visibility>
				<appearance>
					<field id="cm:name" />
					<field id="ucm:artifact_name" />
					<field id="ucm:artist_name" />
					<field id="ucm:museum_number" />
				</appearance>
			</form>
		</forms>
	</config>

	<!-- ucm:artifact type (existing nodes) -->
	<config evaluator="node-type" condition="ucm:artifact">
		<forms>
			<!-- Default form configuration for the ucm:artifact type -->
			<form>
				<edit-form template="/com/alfresco/museum/ucm/form/ucm-artifact-props-form.ftl"/>
				<field-visibility>
					<show id="cm:name" />
					<show id="cm:title" />
					<show id="cm:content" force="true"/>
					
					<show id="ucm:artifact_name"/>
					<show id="ucm:artist_name" />
					<show id="ucm:museum_number" />
					<show id="ucm:artifact_date" />
					<show id="ucm:artifact_medium" />
					<show id="ucm:artifact_technique" />
					<show id="ucm:artifact_dimension" />
					<show id="ucm:artifact_status" />
					<!-- show id="ucm:artifact_contains" /-->
					
					<show id="ucm:artifact_location" />
					<show id="ucm:artifact_collection" />
					<show id="ucm:artifact_acquisition_type" />
					<show id="ucm:artifact_donor" />
					<show id="ucm:artifact_type" />
					<show id="ucm:artifact_on_display" />
					<show id="ucm:artifact_comments" />
					<!--show id="ucm:artifact_referenced_objects" /-->
					<show id="ucm:artist_nickname" />
					<show id="ucm:artist_dob" />
					<show id="ucm:artist_birth_place" />
					<show id="ucm:artist_dod" />
					<show id="ucm:artist_death_place" />
					<show id="ucm:artist_study_workshop" />
					<show id="ucm:artist_live_city" />
					<show id="ucm:artist_period" />
					<show id="ucm:artist_comments" />
					<show id="ucm:museum_artifact_gallery_location" />
					
					<!-- <show id="ucm:artifact_referenced_objects" /> -->

					<!-- cm:dublincore aspect -->
					<!--<show id="cm:publisher" />
					<show id="cm:contributor" />
					<show id="cm:type" />
					<show id="cm:identifier" />
					<show id="cm:dcsource" />
					<show id="cm:coverage" />
					<show id="cm:rights" />
					<show id="cm:subject" /> -->
				</field-visibility>
				<appearance>
					<set id="artifactMain" appearance="fieldset" label="Main artifact properties" />
					<set id="artifactRest" appearance="accordion-wrapper" label="Additional properties" />
						<set id="artifactAdditional" parent="artifactRest" appearance="accordion-element" label="Artifact" />
						<set id="artifactArtist" parent="artifactRest" appearance="accordion-element" label="Artist" />
						<set id="artifactMuseum" parent="artifactRest" appearance="accordion-element" label="Museum" />
					<!-- TODO: rest of aspects. And properties? -->
					<field id="cm:name">
						<control>
							<control-param name="maxLength">255</control-param>
						</control>
					</field>
					<field id="cm:title" />
<!-- 					<field id="cm:content" label-id="">
						<control>
							<control-param name="editorAppearance">explorer</control-param>
						</control>
					</field> -->
					<field id="ucm:artifact_name" set="artifactMain" />
					<field id="ucm:artist_name" set="artifactMain" />
					<field id="ucm:museum_number" set="artifactMain" />
					
					<field id="ucm:artifact_date" set="artifactMain" />
					<field id="ucm:artifact_medium" set="artifactMain" />
					<field id="ucm:artifact_technique" set="artifactMain" />
					<field id="ucm:artifact_dimension" set="artifactMain" />
					<field id="ucm:artifact_status" set="artifactMain" />
					<!--field id="ucm:artifact_contains" set="artifactMain">
			        	<control template="/org/alfresco/components/form/controls/association.ftl">
							<control-param name="">items</control-param>
							<control-param name="displayMode">items</control-param>
							<control-param name="showTargetLink">true</control-param>
							<control-param name="compactMode">true</control-param>
						</control>
					</field-->
					
					<field id="ucm:artifact_location" set="artifactAdditional" />
					<field id="ucm:artifact_collection" set="artifactAdditional" />
					<field id="ucm:artifact_acquisition_type" set="artifactAdditional" />
					<field id="ucm:artifact_donor" set="artifactAdditional" />
					<field id="ucm:artifact_type" set="artifactAdditional" />
					<field id="ucm:artifact_on_display" set="artifactAdditional" />
					<field id="ucm:artifact_comments" set="artifactAdditional" />
					<!--field id="ucm:artifact_referenced_objects" set="artifactAdditional" /-->
					
					<field id="ucm:artist_nickname" set="artifactArtist" />
					<field id="ucm:artist_dob" set="artifactArtist" />
					<field id="ucm:artist_birth_place" set="artifactArtist" />
					<field id="ucm:artist_dod" set="artifactArtist" />
					<field id="ucm:artist_death_place" set="artifactArtist" />
					<field id="ucm:artist_study_workshop" set="artifactArtist" />
					<field id="ucm:artist_live_city" set="artifactArtist" />
					<field id="ucm:artist_period" set="artifactArtist" />
					<field id="ucm:artist_comments" set="artifactArtist" />
					
					<field id="ucm:museum_artifact_gallery_location" set="artifactMuseum" />
				</appearance>
			</form>

			<!-- TODO -->
			<!-- Document Library pop-up Edit Metadata form -->
			<form id="doclib-simple-metadata">
				<field-visibility>
					<show id="cm:name" />
					<show id="ucm:artifact_name" />
					<show id="ucm:artist_name" />
					<show id="ucm:museum_number" />
				</field-visibility>
				<edit-form template="../documentlibrary/forms/doclib-simple-metadata.ftl" />
				<appearance>
					<field id="cm:name" />
					<field id="ucm:artifact_name" />
					<field id="ucm:artist_name" />
					<field id="ucm:museum_number" />
				</appearance>
			</form>

			<!-- TODO -->
			<!-- Document Library Inline Edit form -->
			<form id="doclib-inline-edit">
				<field-visibility>
					<show id="cm:name" />
					<show id="ucm:artifact_name" />
					<show id="ucm:artist_name" />
					<show id="ucm:museum_number" />
				</field-visibility>
				<appearance>
					<field id="cm:name" />
					<field id="ucm:artifact_name" />
					<field id="ucm:artist_name" />
					<field id="ucm:museum_number" />
				</appearance>
			</form>
	</forms>
</config>

	<config evaluator="string-compare" condition="DocumentDetails"
		replace="true">
		<document-details>
			<!-- display web previewer on document details page -->
			<display-web-preview>true</display-web-preview>
		</document-details>
		
		<!-- Sorting Options The 'sort' config element contains the name of the 
			content model field to sort against and can be of the form: - short QName 
			string e.g. "cm:name" - any other valid sortable fts-alfresco special field 
			e.g. "TYPE" The field can be optionally followed by |true or |false to indicate 
			sort direction, where true = ascending, false = descending -->
		<sorting>
			<sort label="label.name">cm:name|true</sort>
			<sort label="label.popularity">cm:likesRatingSchemeCount|false</sort>
			<sort label="label.title">cm:title</sort>
			<sort label="label.description">cm:description</sort>
			<sort label="label.created">cm:created</sort>
			<sort label="label.creator">cm:creator</sort>
			<sort label="label.modified">cm:modified</sort>
			<sort label="label.modifier">cm:modifier</sort>
			<sort label="label.size">cm:content.size</sort>
			<sort label="label.mimetype">cm:content.mimetype</sort>
			<sort label="label.type">TYPE</sort>
		</sorting>
	</config>
   
   <!-- Document Library config section -->
   <config evaluator="string-compare" condition="DocumentLibraryViews" replace="true">
         <!-- The view renderers that will be available as options in DocumentLibrary, My Files, Shared Files and 
              Repository pages. This list can be added to or removed to control the views displayed. Use the a module
              that provides evaluated configuration to have the options change based on criteria (e.g. site name, 
              site preset, user group, etc)
              
              Remember to include all dependencies, even those duplicated by another view - Surf will ensure only 
              one version of each is loaded - but if a view is removed that depends on a dependency defined in another
              view then it will cause an error. 
           -->
      <view-renderers>
<!--          <view-renderer id="simple" iconClass="simple" label="button.view.simple" index="10" widget="Alfresco.DocumentListSimpleViewRenderer">
            <dependencies>
               <js src="components/documentlibrary/documentlist-view-detailed.js" />
               <js src="components/documentlibrary/documentlist-view-simple.js" />
            </dependencies>
         </view-renderer> -->
         <view-renderer id="detailed" iconClass="detailed" label="button.view.detailed" index="20" widget="Alfresco.DocumentListViewRenderer">
            <dependencies>
               <js src="components/documentlibrary/ucm-documentlist-view-detailed.js" />
            </dependencies>
         </view-renderer>
         <view-renderer id="gallery" iconClass="gallery" label="button.view.gallery" index="30" widget="Alfresco.DocumentListGalleryViewRenderer">
            <dependencies>
               <js src="components/documentlibrary/ucm-documentlist-view-detailed.js" />
               <js src="components/documentlibrary/ucm-documentlist-view-gallery.js" />
               <js src="yui/slider/slider.js" />
            </dependencies>
         </view-renderer>
      </view-renderers>
   </config>

	<config evaluator="string-compare" condition="DocLibCustom">
		<dependencies>
			<js src="/custom/ucm-documentlibrary.js" />
		</dependencies> 
	</config>
   
   
       <!-- Commented because normal users should not see this aspect
         It should only be used through the admin interface
        <config evaluator="string-compare" condition="DocumentLibrary">
            <aspects>
                <visible>
                    <aspect name="up:UploadFolder"/>
                </visible>
            </aspects>
        </config>
    -->

    <config evaluator="aspect" condition="up:UploadFolder">
        <forms>
            <form>
                <field-visibility>
                    <show id="up:allowedTypes"/>
                </field-visibility>
            </form>
            <form id="upload-folder">
                <field-visibility>
                    <show id="up:allowedTypes"/>
                </field-visibility>
                <edit-form
                        template="../documentlibrary/forms/doclib-simple-metadata.ftl"/>
                <appearance>
                    <field id="up:allowedTypes">
                        <control
                                template="/uploader-plus/controls/selecttypes.ftl">
                            <control-param name="styleClass">
                                supported-types-select
                            </control-param>
                        </control>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>
</alfresco-config>
